開元大衍曆一
《開元大衍曆》演紀上元閼逢困敦之歲，距開元十二年甲子，積九千六百九十六萬一千七百四十算。

步中朔術
　　一曰步中朔術

　　通法三千四十。

　　策實百一十一萬三百四十三。

　　揲法八萬九千七百七十三。

　　減法九萬一千二百。

　　策余萬五千九百四十三。

　　用差萬七千一百二十四。

　　掛限八萬七千一十八。

　　三元之策十五，餘六百六十四，秒七。

　　四象之策二十九，餘千六百一十三。

　　中盈分千三百二十八，秒十四。

　　朔虛分千四百二十七。

　　爻數六十。

　　象統二十四。

　　以策實乘積算，曰中積分。盈通法得一，為積日。爻數去之，餘起甲子算外，得天正中氣。凡分為小餘，日為大餘。加三元之策，得次氣。凡率相因加者，下有餘秒，皆以類相從。而滿法迭進，用加上位。日盈爻數去之。

　　以揲法去中積分，不盡曰歸餘之掛。以減中積分，為朔積分。如通法為日，去命如前，得天正經朔。加一象之日七、餘千一百六十三少，得上弦。倍之，得望。參之，得下弦。四之，是謂一揲，得後月朔。凡四分，一為少，三為太。綜中盈、朔虛分，累益歸餘之掛，每其月閏衰。凡歸余之掛五萬六千七百六十以上，其歲有閏。因考其閏衰，滿掛限以上，其月合置閏。或以進退，皆以定朔無中氣裁焉。

　　凡常氣小餘不滿通法、如中盈分之半已下者，以象統乘之，內秒分，參而伍之，以減策實；不盡，如策餘為日。命常氣初日算外，得沒日。凡經朔小餘不滿朔虛分者，以小餘減通法，余倍參伍乘之，用減滅法；不盡，如朔虛分為日。命經朔初日算外，得滅日。

發斂術
　　二曰發斂術

　　天中之策五，餘二百二十一，秒三十一；秒法七十二。

　　地中之策六，餘二百六十五，秒八十六；秒法百二十。

　　貞悔之策三，餘百三十二，秒百三。

　　辰法七百六十。

　　刻法三百四。

　　各因中節命之，得初候。加天中之策，得次候。又加，得末候。因中氣命之，得公卦用事。以地中之策累加之，得次卦，若以貞悔之策加侯卦，得十有二節之初外卦用事。因四立命之，得春木、夏火、秋金、冬水用事。以貞悔之策減季月中氣，得土王用事。凡相加減而秒母不齊，當令母互乘子，乃加減之；母相乘為法。

　　各以能法約其月閏衰，為日，得中氣去經朔日算。求卦、候者，各以天、地之策，累加減之。凡發斂加時，各置其小餘，以六爻乘之，如辰法而一，為半辰之數。不盡者，三約為分。分滿刻法為刻。若令滿象積為刻者，即置不盡之數，十之，十九而一，為分。命辰起子半算外。

步日躔術
　　三曰步日躔術

　　幹實百一十一萬三百七十九太。

　　周天度三百六十五，虛分七百七十九太。

　　歲差三十六太。

　　以盈縮分盈減、縮加三元之策，為定氣所有日及餘。乃十二乘日，又三其小餘，辰法約而一，從之，為定氣辰數。不盡，十之，又約為分。以所入氣並後氣盈縮分，倍六爻乘之，綜兩氣辰數除之，為末率。又列二氣盈縮分，皆倍六爻乘之，各如辰數而一；以少減多，餘為氣差。至後以差加末率，分後以差減末率，為初率。倍氣差，亦倍六爻乘之，復綜兩氣辰數除，為日差。半之，以加減初末，各為定率。以日差至後以減、分後以加氣初定率，為每日盈縮分。乃馴積之，隨所入氣日加、減氣下先、後數，各其日定數。其求朓朒仿此。冬至後為陽復，在盈加之，在縮減之；夏至後為陰復，在縮加之，在盈減之。距四正前一氣，在陰陽變革之際，不可相並，皆因前末為初率。以氣差至前加之，分前減之，為末率。餘依前術，各得所求。其分不滿全數，母又每氣不同，當退法除之。以百為母，半已上，收成一。冬至、夏至偕得天地之中，無有盈、縮。餘各以氣下先後數先減、後加常氣小余，滿若不足，進退其日，得定大小餘。凡推日月度及軌漏、交蝕，依定氣；注曆，依常氣。以減經朔、弦、望，各其所入日算。若大餘不足減，加爻數，乃減之。減所入定氣日算一，各以日差乘而半之；前少以加、前多以減氣初定率，以乘其所入定氣日算及餘秒。凡除者，先以母通全，內子，乃相乘；母相乘除之。所得以損益朓朒積，各其入朓朒定數。若非朔、望有交者，以十二乘所入日算；三其小餘，辰法除而從之；以乘損益率，如定氣辰數而一。所得以損益朓朒積，各為定數。

　　南斗二十六，牛八，婺女十二，虛十，虛分七百七十九太。危十七，營室十六，東壁九，奎十六，婁十二，胃十四，昴十一，畢十七，觜觿一，參十，東井三十三，輿鬼三，柳十五，七星七，張十八，翼十八，軫十七，角十二，亢九，氐十五，房五，心五，尾十八，箕十一，為赤道度。其畢、觜觿、參、輿鬼四宿度數，與古不同，依天以儀測定，用為常數。紘帶天中，儀極攸憑，以格黃道。

　　推冬至歲差所在，每距冬至前後各五度為限，初數十二，每限減一，盡九限，數終於四。當二立之際，一度少強，依平。乃距春分前、秋分後，初限起四，每限增一，盡九限，終於十二，而黃道交復。計春分後、秋分前，亦五度為限。初數十二，盡九限，數終於四。當二立之際，一度少強，依平。乃距夏至前後，初限起四，盡九限，終於十二。皆累裁之，以數乘限度，百二十而一，得度；不滿者，十二除，為分。若以十除，則大分，十二為母，命太、半、少及強、弱。命曰黃、赤道差數。二至前、後各九限，以差減赤道度，二分前、後各九限，以差加赤道度，各為黃道度。

　　開元十二年，南斗二十三半，牛七半，婺女十一少，虛十，六虛之差十九太。危十七太，營室十七少，東壁九太，奎十七半，婁十二太，胃十四太，昴十一，畢十六少，觜觿一，參九少，東井三十，輿鬼二太，柳十四少，七星六太，張十八太，翼十九少，軫十八太，角十三，亢九半，氐十五太，房五，心四太，尾十七，箕十少，為黃道度，以步日行。日與五星出入，循此。求此宿度，皆有餘分，前後輩之成少、半、太，准為全度。若上考往古，下驗將來，當據歲差，每移一度，各依術算，使得當時度分，然後可以步三辰矣。

　　以乾實去中積分，不盡者，盈通法為度。命起赤道虛九，宿次去之，經虛去分，至不滿宿算外，得冬至加時日度。以三元之策累加之，得次氣加時日度。

　　以度餘減通法，餘以冬至日躔距度所入限數乘之，為距前分。置距度下黃、赤道差，以通法乘之，減去距前分，余滿百二十除，為定差。不滿者，以象統乘之，復除，為秒分。乃以定差減赤道宿度，得冬至加時黃道日度。

　　又置歲差，以限數乘之，滿百二十除，為秒分。不盡為小分。以加三元之策，因累裁之。命以黃道宿次，各得定氣加時日度。

　　置其氣定小餘，副之。以乘其日盈、縮分，滿通法而一，盈加、縮減其副。用減其日加時度餘，得其夜半日度。因累加一策，以其日盈、縮分盈加、縮減度餘，得每日夜半日度。

步月離術
　　四曰步月離術

　　轉終六百七十萬一千二百七十九。

　　轉終日二十七，餘千六百八十五，秒七十九。

　　轉法七十六。

　　轉秒法八十。

　　以秒法乘朔積分，盈轉終去之；餘復以秒法約，為入轉分；滿通法，為日。命日算外，得天正經朔加時所入。因加轉差日一、餘二千九百六十七、秒一，得次朔。以一象之策，循變相加，得弦、望。盈轉終日及餘秒者，去之。各以經朔、弦、望小餘減之，得其日夜半所入。

　　各置朔、弦、望所入轉日損益率，並後率而半之，為通率。又二率相減，為率差。前多者，以入餘減通法，餘乘率差，盈通法得一，並率差而半之；前少者，半入餘，乘率差，亦以通法除之：為加時轉率。乃半之，以損益加時所入，余為轉餘。其轉余，應益者，減法；應損者，因餘。皆以乘率差，盈通法得一，加於通率，轉率乘之，通法約之，以朓減、朒加轉率，為定率。乃以定率損益朓肉積，為定數。其後無同率者，亦因前率。應益者，以通率為初數，半率差而減之；應損者，即為通率。其損益入餘進退日，分為二日，隨余初末，如法求之，所得並以損益轉率。此術本出《皇極曆》，以究算術之微變。若非朔、望有交者，直以入餘乘損益率，如通法而一，以損益朓朒，為定數。

　　七日、初數二千七百一，末數三百三十九。十四日、初數二千三百六十三，末數六百七十七。二十一日、初數二千二十四，末數千一十六。二十八日，初數千六百八十六，末數千三百五十四。以四象約轉終，均得六日二千七百一分。就全數約為九分日之八。各以減法，餘為末數。乃四象馴變相加，各其所當之日初、末數也。視入轉余，如初數已下者，加減損益，因循前率；如初數以上，則反其衰，歸於後率雲。

　　各置朔、弦、望大小餘，以入氣、入轉朓朒定數，朓減、朒加之，為定朔、弦、望大小餘。定朔日名與後朔同者，月大；不同者，小；無中氣者，為閏月。凡言夜半，皆起晨前子正之中。若注曆，觀弦、望定小餘，不盈晨初餘數者，退一日。其望有交、起虧在晨初已前者，亦如之。又月行九道遲疾，則有三大二小以日行盈、縮累增、損之，則容有四大三小，理數然也。若俯循常儀，當察加時早晚，隨其所近而進退之，使不過三大二小。其正月朔有交、加時正見者，消息前後一兩月，以定大小，令虧在晦、二。定朔、弦、望夜半日度，各隨所直日度及餘分命之。乃列定朔、弦、望小餘，副之。以乘其日盈、縮分，如通法而一，盈加、縮減其副。以加夜半日度，各得加時日度。

　　凡合朔所交，冬在陰曆、夏在陽曆，月行青道；冬至、夏至後，青道半交在春分之宿，當黃道東。立冬、立夏後，青道半交在立春之宿，當黃道東南。至所沖之宿，亦如之。冬在陽曆、夏在陰曆，月行白道；冬至、夏至後，白道半交在秋分之宿，當黃道西。立冬、立夏後，白道半交在立秋之宿，當黃道西北。至所沖之宿，亦如之。春在陽曆、秋在陰曆，月行硃道；春分、秋分後，硃道半交在夏至之宿，當黃道南。立春、立秋後，硃道半交在立夏之宿，當黃道西南。至所沖之宿，亦如之。春在陰曆，秋在陽曆，月行黑道。春分、秋分後，黑道半交在冬至之宿，當黃道北，立春、立秋後，黑道半交在立冬之宿，當黃道東北。至所沖之宿，亦如之。四序離為八節，至陰陽之所交，皆與黃道相會，故月有九行。各視月交所入七十二候距交初中黃道日度，每五度為限，亦初數十二，每限減一，數終於四、乃一度強，依平。更從四起，每限增一，終於十二，而至半交，其去黃道六度。又自十二，每限減一，數終於四，亦一度強，依平。更從四起，每限增一，終於十二，復與日軌相會。各累計其數，以乘限度，二百四十而一，得度。不滿者，二十四除，為分，若以二十除之，則大分，以十二為母。為月行與黃道差數。距半交前後各九限，以差數為減；距正交前後各九限，以差數為加。此加減出入六度，單與黃道相較之數。若較之赤道，則隨氣遷變不常。計去冬至、夏至以來候數，乘黃道所差，十八而一，為月行與赤道差數。凡日以赤道內為陰，外為陽；月以黃道內為陰，外為陽。故月行宿度，入春分交後行陰曆、秋分交後行陽曆，皆為同名。若入春分交後行陽曆、秋分交後行陰曆，皆為異名。其在同名，以差數為加者加之，減者減之；若在異名，以差數為加者減之，減者加之。皆以增損黃道度，為九道定度。

　　各以中氣去經朔日算，加其入交泛，乃以減交終，得平交入中氣日算。滿三元之策去之，餘得入後節日算。因求次交者，以交終加之，滿三元之策去之，得後平交入氣日算。

　　各以氣初先後數先加、後減之，得平交入定氣日算。倍六爻乘之，三其小餘，辰法除而從之，以乘其氣損益率，如定氣辰數而一，所得以損益其氣朓朒積，為定數。

　　又置平交所入定氣餘，加其日夜半入轉餘，以乘其日損益率，滿通法而一，以損益其日朓朒積，交率乘之，交數而一，為定數。乃以入氣入轉朓朒定數，朓減、朒加平交入氣余，滿若不足，進退日算，為正交入定氣日算。其入定氣餘，副之，乘其日盈縮分，滿通法而一，以盈加、縮減其副，以加其日夜半日度，得正交加時黃道日度。以正交加時度餘減通法，餘以正交之宿距度所入限數乘之，為距前分。置距度下月道與黃道差，以通法乘之，減去距前分，余滿二百四十除，為定差；不滿者一退為秒。以定差及秒加黃道度、余，仍計去冬至、夏至已來候數乘定差，十八而一，所得依名同異而加減之，滿若不足，進退其度，得正交加時月離九道宿度。

　　各置定朔、弦、望加時日度，從九道循次相加。凡合朔加時，月行潛在日下，與太陽同度，是謂離象。先置朔、弦、望加時黃道日度，以正交加時所在黃道宿度減之，餘以加其正交九道宿度，命起正交宿度算外，即朔、弦、望加時所當九道宿度也。其合朔加時，若非正交，則日在黃道，月在九道，各入宿度雖多少不同，考其去極，若應繩准。故云：月行潛在日下，與太陽同度。以一象之度九十一、餘九百五十四、秒二十二半為上弦，兌象。倍之，而與日沖，得望，坎象。參之，得下弦，震象。各以加其所當九道宿度，秒盈象統從余，余滿通法從度，得其日加時月度。綜五位成數四十，以約度餘，為分；不盡者，因為小分。

　　視經朔夜半入轉，若定朔大餘有進退者，亦加、減轉日。否則因經朔為定。累加一日，得次日，各以夜半入轉餘乘列衰，如通法而一，所得以進加、退減其日轉分，為月轉定分。滿轉法，為度。

　　視定朔、弦、望夜半入轉，各半列衰以減轉分。退者，定餘乘衰，以通法除，並衰而半之；進者，半餘乘衰，亦以通法除：皆加所減。乃以定餘乘之，盈通法得一，以減加時月度，為夜半月度。各以每日轉定分累加之，得次日。若以入轉定分，乘其日夜漏，倍百刻除，為晨分。以減轉定分，餘為昏分。望前以昏、望後以晨加夜半度，各得晨、昏月。

　　各視每日夜半入陰陽曆交日數，以其下屈伸積，月道與黃道同名者，加之；異名者，減之。各以加、減每日辰昏黃道月度，為入宿定度及分。

步軌漏術
　　五曰步軌漏術

　　爻統千五百二十。

　　象積四百八十。

　　辰八刻百六十分。

　　昏、明二刻二百四十分。

　　各置其氣消息衰，依定氣所有日，每以陟降率陟減、降加其分，滿百從衰，各得每日消息定衰。其距二分前後各一氣之外，陟、降不等，皆以三日為限。雨水初日，降七十八；初限，日損十二；次限，日損八；次限，日損三；次限，日損二；次限，日損後。清明初日，陟一；初限，日益一；次限，日益二；次限，日益三；次限，日益八；末限，日益十九。處暑初日，降九十九；初限，日損十九；次限，日損八；次限，日損三；次限，日損二；末限，日損一。寒露初日，陟一；初限，日益一；次限，日益二；次限，日益三；次限，日益八；末限，日益十二。各置初日陟降率，依限次損益之，為每日率。乃遞以陟減、降加氣初消息衰，各得每日定衰。

　　南方戴日之下，正中無晷。自戴日之北一度，乃初數千三百七十九。自此起差，每度增一，終於二十五度，計增二十六分。又每度增二，終於四十度。又每度增六，終於四十四度，增六十八。又每度增二，終於五十度。又每度增七，終於五十五度。又每度增十九，終於六十度，增百六十。又每度增三十三，終於六十五度。又每度增三十六，終於七十度。又每度增三十九，終於七十二度，增二百六十。又度增四百四十。又度增千六十。又度增千八百六十。又度增二千八百四十。又度增四千。又度增五千三百四十。各為每度差。因累其差，以遞加初數，滿百為分，分十為寸，各為每度晷差。又累其晷差，得戴日之北每度晷數。

　　各置其氣去極度，以極去戴日度五十六及分八十二半減之，得戴日之北度數。各以其消息定衰所直度之晷差，滿百為分，分十為寸，得每日晷差。乃遞以息減、消加其氣初晷數，得每日中晷常數。

　　以其日處在氣定小餘，爻統減之，餘為中後分。不足減，反相減，為中前分。以其晷差乘之，如通法而一，為變差。以加、減中晷常數，冬至後，中前以差減，中後以差加；夏至後，中前以差加，中後以差減。冬至一日，有減無加；夏至一日，有加無減。得每日中晷定數。

　　又置消息定衰，滿象積為刻，不滿為分。各遞以息減、消加其氣初夜半漏，得每日夜半漏定數。其全刻，以九千一百二十乘之，十九乘刻分從之，如三百而一，為晨初餘數。

　　各倍夜半漏，為夜刻。以減百刻，餘為晝刻。減晝五刻以加夜，即晝為見刻，夜為沒刻。半沒刻加半辰，起子初算外，得日出辰刻。以見刻加而命之，得日入。置夜刻，五而一，得每更差刻。又五除之，得每籌差刻。以昏刻加日入辰刻，得甲夜初刻。又以更籌差加之，得五夜更籌所當辰。其夜半定漏，亦名晨初夜刻。

　　又置消息定衰，滿百為度，不滿為分。各遞以息減、消加氣初去極度，各得每日去極定數。

　　又置消息定衰，以萬二千三百八十六乘之，如萬六千二百七十七而一，為度差。差滿百為度。各遞以息加、消減其氣初距中度，得每日距中度定數。倍之，以減周天，為距子度。

　　置其日赤道日度，加距中度，得昏中星。倍距子度，以加昏中星，得曉中星。命昏中星為甲夜中星，加每更差度，得五夜中星。

　　凡九服所在，每氣初日中晷常數不齊。使每氣去極度數相減，各為其氣消息定數。因測其地二至日晷，測一至可矣，不必兼要冬夏。于其戴日之北每度晷數中，較取長短同者，以為其地戴日北度數及分。每氣各以消息定數加減之，因冬至後者，每氣以減。因夏至後者，每氣以加。得每氣戴日北度數。各因所直度分之晷數，為其地每定氣初日中晷常數。其測晷有在表南者，亦據其晷尺寸長短與戴日北每度晷數同者，因取其所直之度，去戴日北度數。反之，為去戴日南度。然後以消息定數加減之。

　　二至各於其地下水漏以定當處晝夜刻數。乃相減，為冬、夏至差刻。半之，以加、減二至晝夜刻數，為定春、秋分初日晝夜刻數。乃置每氣消息定數。以當處差刻數乘之，如二至去極差度四十七分，八十而一，所得依分前、後加、減初日晝夜漏刻，各得余定氣初日晝夜漏刻。

　　置每日消息定衰，亦以差刻乘之，差度而一，所得以息減、消加其氣初漏刻，得次日。其求距中度及昏明中星日出入，皆依陽城法求之。仍以差刻乘之，差度而一，為今有之數。若置其地春、秋定日中晷常數與陽城每日晷數，較其同者，因其日夜半漏亦為其地定春、秋分初日夜半漏。求余定氣初日，亦以消息定數依分前、後加、減刻分，春分後以減，秋分後以加。滿象積為刻。求次日，亦以消息定衰，依陽城術求之。此術究理，大體合通。然高山平川，視日不等。較其日晷，長短乃同。考其水漏，多少殊別。以茲參課，前術為審。


Chinese text: This work was published before January 1, 1923, and is in the
public domain worldwide because the author died at least 100 years ago.
