開元大衍曆二
步交會術
　　六曰步交會術

　　終數八億二千七百二十五萬一千三百二十二。

　　交終日二十七，餘六百四十五，秒千三百二十二。

　　中日十三，餘千八百四十二，秒五千六百六十一。

　　朔差日二，餘九百六十七，秒八千六百七十八。

　　望差日一，餘四百八十三，秒九千三百三十九。

　　望數日十四，餘二千三百二十六，秒五千。

　　交限日十二，餘千三百五十八，秒六千三百二十二。

　　交率三百四十三。

　　交數四千三百六十九。

　　交秒法一萬。

　　以交數去朔積分；不盡，以秒法乘之，盈交數又去之；餘如秒法而一，為入交分。滿通法為日，命日算外，得天正經朔時加入交泛日及餘。因加朔差，得次朔。以望數加朔，得望。若以經朔望小餘減之，各得夜半所入。累加一日，得次日。加之滿交終，去之。各以其日入氣朓朒定數，朓減、朒加入交泛，為入交常日及餘。又以交率乘其日入轉朓朒定數，如交數而一，而朓減、朒加入交常，為入交定日及餘。各如中日已下者，為月入陽曆；已上者，去之，餘為月入陰曆。

陰陽曆
　　陰陽曆

　　以其爻加減率與後爻加減率相減，為前差。又以後爻率與次後爻率相減，為後差。二差相減，為中差。置所在爻並後爻加減率，半中差以加而半之，十五而一，為爻末率，因為後爻初率。每以本爻初、末率相減，為爻差。十五而一，為度差。半之，以加減初率，少象減之，老象加之。為定初率。每以度差累加減之，少象以差減，老象以差加。各得每歲加減定分。乃循積其分，滿百二十為度，各為月去黃道數及分。其四象初爻無初率，上爻無末率，皆倍本爻加減率，十五而一。所得各以初、末率減之，皆互得其率。

　　各置夜半入轉，以夜半入交定日及餘減之，不足減，加轉終。余為定交初日夜半入轉。乃以定交初日與其日夜半入餘，各乘其日轉定分，如通法而一，為分。滿轉法，為度。各以加其日轉積度分，乃相減，所餘為其日夜半月行入陰陽度數。轉求次日，以轉定分加之。以一象之度九十除之，若以少象除之，則兼除差度一、度分百六、大分十三、小分十四。訖，然後以次象除之。所得以少陽、老陽、少陰、老陰為次，起少陽算外，得所入象度數及分。先以三十乘陰陽度分，十九而一，為度分。不盡，以十五乘、十九除，為大分。不盡者，又乘、又除，為小分。然後以象度及分除之。乃以一爻之度十五除之，所得入爻度數及分。其月行入少象初爻之內及老象上爻之中，皆沾黃道。當朔望，則有虧蝕。

　　凡入交定如望差已下，交限已上，為入蝕限；望入蝕限，則月蝕。朔入蝕限，月在陰曆，則日蝕。如望差已下，為交後。交限已上，以減交中，餘為交前。置交前、後定日及餘，通之，為去交前、後定分。十一乘之，二千六百四十三除，為去交度數。不盡，以通法乘之，復除為餘。大抵去交十三度已上，雖入蝕限，為涉交數微，光景相接，或不見蝕。望去交分七百七十九已下者，皆既。已上者，以定交分減望差，餘以百八十三約之，命以十五為限，得月蝕之大分。

　　月在陰曆，初起東南，甚于正南，復於西南；月在陽曆，初起東北，甚於正北，復於西北。其蝕十二分已上者，起於正東，復於正西。此據午正而論之。餘各隨方面所在，准此取正。

　　凡月蝕之大分五已下，因增三。十已下，因增四。十已上，因增五。其去交定分五百二十已下，又增半。二百六十已下，又增半。各為泛用刻率。

　　以所入氣並後氣增損差，倍六爻乘之，綜兩氣辰數除之，為氣末率。又列二氣增損差，皆倍六爻乘之，各如辰數而一；少減多，餘為氣差。加減末率冬至後以差減，夏至後以差加。為初率。倍氣差，綜兩氣辰數除，為日差。半之，加減初、末，為定率。以差累加、減氣初定率，冬至後以差加，夏至後以差減。為每日增損差。乃循積之，隨所入氣日增損氣下差積，各其日定數。其二至之前一氣，皆後無同差，不可相並，各因前末為初率。以氣差冬至前減、夏至前加，為末率。

　　陰曆蝕差千二百七十五，蝕限三千五百二十四，或限三千六百五十九。陽曆蝕限百三十五，或限九百七十四。以蝕朔所入氣日下差積，陰曆減之，陽曆加之，各為蝕定差及定限。朔在陰曆，去交定分滿蝕定差已上者，為陰曆蝕。不滿者，雖在陰曆，皆類同陽曆蝕。其去交定分滿定限已下者，的蝕。或限已下者，或蝕。

　　陰曆蝕者，置去交定分，以蝕定差減之，餘百四已下者，皆蝕既。已上者，以百四減之。餘以百四十三約之。其入或限者，以百五十二約之。半已下，為半弱。半已上，為半強。以減十五，餘為日蝕之大分。其同陽曆蝕者，其去交定分少於蝕定差六十已下者，皆蝕既。已上者，以陽曆蝕定限加去交分，以九十約之。其陽曆蝕者，置去交定分，亦以九十約之。入或限者，以百四十三約之。皆半已下，為半弱。半已上，為半強。命之，以十五為限，得日蝕之大分。

　　月在陰曆，初起西北，甚於正北，復于東北。月在陽曆，初起西南，甚于正南，復于東南。其蝕十二分已上，皆起於正西，復於正東。

　　凡日蝕之大分，皆因增二。其陰曆去交定分多於蝕定差七十已上者，又增；三十五已下者，又增半。其同陽曆去交定分少於蝕定差二十已下者，又增半；四已下者，又增少。各為泛用刻率。

　　置去交定分，以交率乘之，二十乘交數除之；其月道與黃道同名者，以加朔望定小餘：異名者，以減朔、望定小餘：為蝕定餘。如求發斂加時術入之，得蝕甚辰刻。各置泛用刻率，副之。以乘其日入轉損益率，如通法而一。所得應朒者，依其損益；應朓者，損加、益減其副：為定用刻數。半之，以減蝕甚辰刻，為虧初；以加蝕甚辰刻，為復末。其月蝕，置定用刻數，以其日每更差刻除，為更數。不盡，以每籌差刻除，為籌數。綜之為定用更籌。乃累計日入後至蝕甚辰刻，置之，以昏刻加日入辰刻減之，餘以更籌差刻除之。所得命以初更籌算外，得蝕甚更籌。半定用更籌減之，為虧初；加之，為復末。按天竺俱摩羅所傳斷日蝕法，日躔郁車宮者，的蝕。其餘據日所在宮，火星在前三及後五之宮，並伏在日下，則不蝕。若五星皆見，又水在陰曆及三星已上同聚一宿，則亦不蝕。凡星與日別宮或別宿則易斷，若同宿則難。天竺所雲十二宮，即中國之十二次。郁車宮者，降婁之次也。

　　九服之地，蝕差不同。先測其地二至及定春秋分中晷長短，與陽城每日中晷常數較取同者，各因其日蝕差為其地二至及定春秋分蝕差。以夏至差減春分差，以春分差減冬至，各為率。並二率，半之，六而一，為夏率。二率相減，六而一，為總差。置總差，六而一，為氣差。半氣差，以加夏率，又以總差減之，為冬率。冬率即冬至率。每以氣差加之，各為每氣定率。乃循積其率，以減冬至蝕差，各得每氣初日蝕差。求每日，如陽城法求之。若戴日之南，當計所在地，皆反用之。

步五星術
　　七曰步五星術

歲星
　　歲星

　　終率百二十一萬二千五百七十九，秒六。

　　終日三百九十八，餘二千六百五十九，秒六。

　　變差三十四，秒十四。

　　象算九十一，餘二百三十八，秒五十七，微分十二。

　　爻算十五，餘百六十六，秒四十二，微分八十二。

熒惹
　　熒惹

　　終率二百三十七萬一千三，秒八十六。

　　終日七百七十九，餘二千八百四十三，秒八十六。

　　變差三十二，秒二。

　　象算九十一，餘二百三十八，秒四十三，微分八十四。

　　爻算十五，餘百六十六，秒四十，微分六十二。

鎮星
　　鎮星

　　終率百一十四萬九千三百九十九，秒九十八。

　　終日三百七十八，餘二百七十九，秒九十八。

　　變差二十二，秒九十二。

　　象算九十一，餘二百三十七，秒八十七。

　　爻算十五，餘百六十六，秒三十一，微分十六。

太白
　　太白

　　終率百七十七萬五千三十，秒十二。

　　終日五百八十三，餘二千七百一十一，秒十二。

　　中合日二百九十一，餘二千八百七十五，秒六。

　　變差三十，秒五十三。

　　象算九十一，餘二百三十八，秒三十四，微分五十四。

　　爻算十五，餘百六十六，秒三十九，微分九。

辰星
　　辰星

　　終率三十五萬二千二百七十九，秒七十二。

　　終日百一十五，餘二千六百七十九，秒七十二。

　　中合日五十七，餘二千八百五十九，秒八十六。

　　變差百三十六，秒七十八。

　　象算九十一，餘二百四十四，秒九十八，微分六十。

　　爻算十五，餘百六十七，秒四十九，微分七十四。

　　辰法七百六十。

　　秒法一百。

　　微分法九十六。

　　置中積分，以冬至小餘減之，各以其星終率去之，不盡者，返以減終率；余滿通法為日，得冬至夜半後平合日算。各以其星變差乘積算，滿幹實去之；余滿通法，為日。以減平合日算，得入曆算數。皆四約其餘，同於辰法。及以一象之算除之，以少陽、老陽、少陰、老陰為次，起少陽算外。餘以一爻之算除之；所得命起其象初爻算外，得外入爻算數。

五星爻象曆
　　五星爻象曆

　　以所入爻與後爻損益率相減，為前差；又以後爻與次後爻損益率相減，為後差；二差相減，為中差。置所入爻並後爻損益率，半中差以加之，九之，二百七十四而一，為爻末率，因為後爻初率。皆因前爻末率，以為後爻初率。初、末之率相減，為爻差。倍爻差，九之，二百七十四而一，為算差。半之，加減初、末，各為定率。以算差累加、減爻初定率，少象以差減，老象以差加。為每算損益率。循累其率，隨所入爻損益其下進退積，各得其算定數。其四象初爻無初率，上爻無末率，皆置本爻損益率四而九之，二百七十四得一，各以初、末率減之，皆互得其率。

　　各置其星平合所入爻之算差，半之，以減其入算損益率。損者，以所入餘乘差，辰法除，並差而半之；益者，半入餘，乘差，亦辰法除：皆中所減之率。乃以入餘乘之，辰法而一。所得以損益其算下進退，各為平合所入定數。

　　置進退定數，金星則倍置之。各以合下乘數乘之，除數除之。所得滿辰法為日，以進加、退減平合日算，先以四約平合餘，然後加減。為常合日算。

　　置常合日先後定數，四而一，以先減、後加常合日算，得定合日算。又四約盈縮分，以定合餘乘之，滿辰法而一。所得以盈加、縮減其定餘，加其日夜半日度，為定合加時星度。

　　又置定合日算，以冬至大小餘加之，天正經朔大小餘減之。其至朔小餘，皆先以四約之。若大餘不足減，又以爻數加之，乃減之。余滿四象之策除，為月數。不盡者，為入朔日算。命月起天正、日起經朔算外，得定合月、日。視定朔與經朔有進退者，亦進減、退加一日為定。

　　置常合及定合應加減定數，同名相從，異名相消；乃以加減其平合入爻算，滿若不足，進退爻算，得定合所入。乃以合後諸變曆度累加之，去命如前，得次變初日所入。如平合求進退定數，乃以乘數乘之，除數除之，各為進退變率。

　　五星變行日中率、度中率、差行損益率、曆度乘數、除數

　　歲星

　　合後伏：十七日三百三十二分，行三度三百三十二分。先遲，二日益疾九分。曆，一度三百五十七分。乘數三百五十，除數二百八十一。

　　前順：百一十二日，行十八度六百五十六分。先疾，五日益遲六分。曆，九度三百三十七分。乘數三百五十，除數二百八十一。

　　前留：二十七日。曆，二度二百二十分。乘數二百六十七，除數二百二十一。

　　前退：四十三日，退五度三百六十九分。先遲，六日益疾十一分。曆，三度四百七十五分。乘數四百七十，除數四百三。

　　後退：四十三日，退五度三百六十九分。先遲，六日益遲十一分。曆，三度四百七十五分。乘數五百一十，除數四百六十七。

　　後留：二十七日。曆，三度二百一十分。乘數二百七十，除數二百二十二。

　　後順：百一十二日，行十八度六十五分。先遲，五日益疾六分。曆，九度三百三十七分。乘數二百六十七，除數二百二十七。

　　合前伏：十七日三百三十二分，行三度三百三十二分。先疾，二日益遲九分。曆，一度三百五十八分。乘數三百五十，除數二百八十一。

　　熒惑

　　合後伏：七十一日七百三十五分，行五十四度七百三十五分。先疾，五日益遲七分。曆，三十八度二百一分。乘數百二十七，除數三十。

　　前疾：二百一十四日，行百三十六度。先疾，九日益遲四分。曆，百一十三度五百九十六分。乘數百二十七，除數三十。

　　前遲：六十日，行二十五度。先疾，日益遲四分。曆，三十一度六百八十五分。乘數二百三，除數五十四。

　　前留：十三日，曆，六度六百九十三分。乘數二百三，除數五十四。

　　前退：三十一日，退八度四百七十三分。先遲，六日益疾五分。曆，十六度三百六十七分。乘數二百三，除數四十八。

　　後退：三十一日，退八度四百七十三分。先疾，六日益遲五分。曆，十六度三百六十七分。乘數二百三，除數四十八。

　　後留：十三日。曆，六度六百九十三分。乘數二百三，除數四十八。

　　後遲：六十日，行二十五度。先遲，日益疾四分。曆，三十一度六百八十五分。乘數二百三，除數五十四。

　　後疾：二百一十四日，行百三十六度。先遲，九日益疾四分。曆，百一十三度五百九十六分。乘數二百三，除數五十四。

　　合前伏：七十一日七百三十六分，行五十四度七百三十六分。先遲，五日益疾七分。曆，三十八度二百一分。乘數百二十七，除數三十。

　　鎮星

　　合後伏：十八日四百一十五分，行一度四百一十五分。先遲，二日益疾九分。曆，四百八十分。乘數十二，除數十一。

　　前順：八十三日，行七度二百四十一分。先疾，六日益遲五分。曆，二度六百二十三分。乘數十二，除數十一。

　　前留：三十七日三百八十分。曆，一度二百八分。乘數十，除數九。

　　前退：五十日，退二度三百三十四分。先遲，七日益疾一分。曆，一度五百三十一分。乘數二十，除數十七。

　　後退：五十日，退二度三百三十四分，先疾，七日益遲一分。曆，一度五百三十一分。乘數五，除數四。

　　後留：三十七日三百八十分。曆，一度二百八分。乘數二十，除數一十七。

　　後順：八十三日，行七度二百四十一分。先遲，六日益疾五分。曆，二度六百二十三分。乘數十，除數九。

　　合前伏：十八日四百一十五分，行一度四百一十五分。先疾，二日益遲九分。曆，四百八十分。乘數十二，除數十一。

　　太白

　　晨合後伏：四十一日七百一十九分，行五十二度七百一十九分。先遲，三日益疾十六分。曆，四十一度七百一十九分。乘數七百九十七，除數二百九。

　　夕疾行：百七十一日，行二百六度。先疾，五日益遲九分。曆，百七十一度乘數七百九十七，除數二百九。

　　夕平行：十二日，行十二度。曆，十二度。乘數五百一十五，除數百五十六。

　　夕遲行：四十二日，行三十一度，先疾，日益遲十分。曆，四十二度。乘數五百一十五，除數百三十七。

　　夕留：八日。曆，八度。乘數五百一十五，除數九十二。

　　夕退：十日，退五度。先遲，日益疾九分。曆，十度。乘數五百一十五，除數八十六。

　　夕合前伏：六日，退五度。先疾，日益遲十五分。曆，六度。乘數五百一十五，除數八十四。

　　夕合後伏：六日，退五度。先遲，日益疾十五分。曆，六度。乘數五百一十五，除數八十三。

　　晨退：十日，退五度。先疾，日益遲九分。曆，十度。乘數五百一十五，除數八十四。

　　晨留：八日，曆八度。乘數五百一十五，除數八十六。

　　晨遲行：四十二日，行三十一度。先遲，日益疾十分。曆，四十二度。乘數五百一十五，除數九十二。

　　晨平行：十二日，行十二度。曆，十二度。乘數五百一十五，除數百三十七。

　　晨疾行：百七十一日，行二百六度。先遲，五日益疾九分。曆，百七十一度。乘數五百一十五，除數百五十六。

　　晨合前伏：四十一日七百一十九分，行五十二度七百一十九分。先疾，三日益遲十六分。曆，四十一度七百一十九分。乘數七百九十七，除數二百九。

　　辰星

　　晨合後伏：十六日七百一十五分，行三十三度七百一十五分。先遲，日益疾二十二分。曆，十六度七百一十五分。乘數二百八十六，除數二百八十七。

　　夕疾行：十二日，行十七度。先疾，日益遲五十分。曆，十二度。乘數二百八十六，除數二百八十七。

　　夕平行：九日，行九度。曆，九度。乘數四百九十五，除數百九十四。

　　夕遲行：六日，行四度。先疾，日益遲七十六分。曆，六度。乘數四百九十六，除數百九十五。

　　夕留：三日。曆，三度。乘數四百九十七，除數百九十六。

　　夕合前伏：十一日，退六度。先遲，日益疾三十一分。曆，十一度。乘數四百九十八，除數百九十七。

　　夕合後伏：十一日，退六度。先疾，日益遲三十一分。曆，十一度。乘數五百，除數百九十八。

　　晨留：三日。曆，三度。乘數四百九十八，除數百九十八。

　　晨遲行：六日，行四度。先遲，日益疾七十六分。曆，六度。乘數四百九十七，除數百九十六。

　　晨平行：九日，行九度。曆，九度。乘數四百九十六，除數百九十五。

　　晨疾行，十二日，行十七度。先遲，日益疾五十分。曆，十二度。乘數四百九十二，除數百九十四。

　　晨合前伏：十六日七百一十五分，行三十三度七百一十五分。先疾，日益遲二十二分。曆，十六度七百一十五分。乘數二百八十六，除數二百八十七。

　　各置其本進退變率與後變率。同名者，相消為差。在進前少，在退前多，各以差為加；在進前多，在退前少，各以差為減。異名者，相從為並。前退後進，各以並為加；前進後退，各以並為減。逆行度率則反之。皆以差及並，加、減日度中率，各為日度變率。其水星疾行，直以差、並加、減度中率，為變率。其日直因中率為變率，勿加、減也。

　　以定合日與前疾初日、後疾初日與合前伏初日先後定數，各以同名者相消為差，異名者相從為並。皆四而一。所得滿辰法，各為日度。乃以前日度盈加、縮減其合後伏度之變率及合前伏、前疾日之變率，亦以後日度盈減、縮加其後疾日之變率及合前伏、前疾度之變率。金水夕合，反其加減。留退亦然。其二留日之變率，若差於中率者，即以所差之數為度，各加、減本遲度之變率。謂以所多於中率之數加之，少於中率之數減之。已下加、減准此。退行度之變率，若差於中率者，即倍所差之數，各加、減本疾度之變率。其土、木二星，既無遲、疾，即加、減前、後順行度之變率。其水星疾行度之變率，若差於中率者，即以所差之數為日，各加、減留日變率。其留日變率若少不足減者，即侵減遲日變率；若多於中率者，亦以所多之數為日，以加留日變率。各加、減變率訖，皆為日度定率。其日定率有分者，前後輩之。輩，配也，以少分配多分，滿全為日。有餘轉配其諸變率。不加減者，皆依變率為定率。

　　置其星定合餘，以減辰法；余以其星初日行分乘之，辰法而一，以加定合加時度，得定合後夜半星度及餘。自此各依其星計日行度，所至皆從夜半為始。各以一日所行度分順加、退減之。其行有小分者，各滿其法從行分。伏不注度，留者因前，退則依減。順行出虛，去六虛之差。退行入虛，先加此差。六虛之差，亦四而一，乃用加減。訖，皆以轉法約行分，為度分，得每日所至。日度定率，或加或減，益疾益遲，每日漸差，不可預定。今且略據日度中率，商量置之。其定率既有盈縮，即差數合隨而增損，當先檢括諸變定率與中率相較近者因用其差，求其初、末之日行分為主。自余諸變，因此消息，加、減其差，各求初、末行分。迴圈比較，使際會參合，衰殺相循。其金、水皆以平行為主，前後諸變，准此求之。其合前伏，雖有日度定率，因加至合而與後算不葉者，皆從後算為定。其初見伏之度，去日不等，各以日度與星辰相較。木去日十四度，金十一度，火、土、水各十七度皆見。各減一度，皆伏。其木、火、土三星，前順之初，後順之末，及金、水疾行、留、退初、末，皆是見、伏之初日，注曆消息定之。金、水及日、月度，皆不注分。

　　置日定率減一，以所差分乘之，為實。以所差日乘定日率，為法。實如法而一，為行分，得每日差。以辰法通度定率，從其分，如日定率而一，為平行度分。減日定率一，以所差分乘之，二而一，為差率。以加、減平行分，益疾者，以差率減平行為初日，加平行為末日；益遲者，以差率加平行為初日，減平行為末日。得初、末日所行度及分。其差不全而與日相合者，先置日定率減一，以所差分乘之，為實。倍所差日，為法。實如法而一，為行分。不盡者，因為小分。然後為差率。

　　置初日行分，益遲者，以每日差累減之；益疾者，以每日差累加之：得次日所行度分。其每日差及初日行，皆有小分。母既不同，當令同之，乃用加、減。

　　其先定日數而求度者，減所求日一，以每日差乘之，二而一。所得以加、減初日行分，益遲減之，益疾加之。以所求日乘之，如辰法而一，為度。不盡者，為行分，得從初日至所求日積度及分。

　　若先定度數而返求日者，以辰法乘所求行度。有分者，從之。八之，如每日差而一，為積。倍初日行分，以每日差加、減之，益遲者加之，益疾者減之。如每日差而一，為率。令自乘，以積加、減之。益遲者以積減之，益疾者以積加之。開方除之，所得以率加、減之。益遲者以率加之，益疾者以率減之。乃半之，得所求日數。開方除者，置所開之數為實。借一算於實之下，名曰下法。步之，超一位。置商于上方，副商於下法之上，名曰方法。命上商以除實。畢，倍方法一折，下法再折。乃置後商於下法之上，名曰隅法。副隅並方。命後商以除實。畢，隅從方法折下，就除如前開之。

　　五星前變，入陽爻，為黃道北；入陰爻，為黃道南。後變，入陽爻，為黃道南；入陰爻，為黃道北。其金、水二星，以夕為前變，晨為後變。各計其變行，起初日入爻之算，盡老象上爻未算之數。不滿變行度常率者，因置其數以變行日定率乘之，如變行度常率而一，為日。其入變日數與此日數已下者，星在道南北依本所入陰陽爻為定。過此日數之外者，南北返之。

九執曆
　　《九執曆》者，出於西域。開元六年，詔太史監瞿壇悉達譯之。斷取近距，以開元二年二月朔為曆首。度法六十。月有二十九日，餘七百三分日之三百七十三。曆首有朔虛分百二十六。周天三百六十度，無餘分。日去沒分九百分度之十三。二月為時，六時為歲。三十度為相，十二相而周天。望前曰白博義；望後曰黑博義。其算皆以字書，不用籌策。其術繁碎，或幸而中，不可以為法。名數詭異，初莫之辯也。陳玄景等持以惑當時，謂一行寫其術未盡，妄矣。


Chinese text: This work was published before January 1, 1923, and is in the
public domain worldwide because the author died at least 100 years ago.
